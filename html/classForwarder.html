<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Forwarder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Forwarder Class Reference</h1><!-- doxytag: class="Forwarder" -->
<p>(blackadder Core) The <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> Element implements the forwarding function. Currently it supports the basic LIPSIN mechanism.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="forwarder_8hh_source.html">forwarder.hh</a>&gt;</code></p>

<p><a href="classForwarder-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#aab9f2f9898976da51d002adabdb1b8a8">Forwarder</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor: it does nothing - as Click suggests.  <a href="#aab9f2f9898976da51d002adabdb1b8a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#acaaa7437946717fbc712b1b7727e8326">~Forwarder</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor: it does nothing - as Click suggests.  <a href="#acaaa7437946717fbc712b1b7727e8326"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#a0408ca9c7e6231336e9917b87e01699a">class_name</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the class name - required by Click  <a href="#a0408ca9c7e6231336e9917b87e01699a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#ae4e4728697424785342b5ec538295055">port_count</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the port count - required by Click - it can have multiple output ports that are connected with Click "network" Elements, like ToDevice and raw sockets. It can have multiple input ports from multiple "network" devices, like FromDevice or raw sockets.  <a href="#ae4e4728697424785342b5ec538295055"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#a76261872ec5ee66b76c1a0dd3f714bf6">processing</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">a PUSH Element.  <a href="#a76261872ec5ee66b76c1a0dd3f714bf6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8b7fe23309390cba3b14a7df2265a63"></a><!-- doxytag: member="Forwarder::configure" ref="ad8b7fe23309390cba3b14a7df2265a63" args="(Vector&lt; String &gt; &amp;, ErrorHandler *)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#ad8b7fe23309390cba3b14a7df2265a63">configure</a> (Vector&lt; String &gt; &amp;, ErrorHandler *)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Element configuration. <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> needs a pointer to the GlovalConf Element so that it can read the Global Configuration. Then, there is the number of (LIPSIN) links. For each such link the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> reads the outgoing port (to a "network" Element), the source and destination Ethernet or IP addresses (depending on the network mode) as well as the Link identifier (FID_LEN size see <a class="el" href="helper_8hh_source.html">helper.hh</a>). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#a40dc92891be477b51b2f142407eacba7">configure_phase</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This Element must be configured AFTER the <a class="el" href="classGlobalConf.html" title="(blackadder Core) GlobalConf is a Click Element that contains information that need...">GlobalConf</a> Element.  <a href="#a40dc92891be477b51b2f142407eacba7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#a064df414ca3b0f54ef0b814d4ef4ee6e">initialize</a> (ErrorHandler *errh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method is called by Click when the Element is about to be initialized. There is nothing that needs initialization though.  <a href="#a064df414ca3b0f54ef0b814d4ef4ee6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#aa12014363a6c44d41ce6aaf76284839a">cleanup</a> (CleanupStage stage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleanups everything.  <a href="#aa12014363a6c44d41ce6aaf76284839a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#ae6f7478cab95a99ef3b34b1ae27832be">push</a> (int port, Packet *p)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This method is called whenever a packet is received from the network (and pushed to the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> by a "network" Element) or whenever the <a class="el" href="classLocalProxy.html" title="(blackadder Core) The LocalProxy Element is the core element in a Blackadder Node...">LocalProxy</a> pushes a packet to the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a>.  <a href="#ae6f7478cab95a99ef3b34b1ae27832be"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab0f7531a86ea72993a4571192d1fdd5c"></a><!-- doxytag: member="Forwarder::gc" ref="ab0f7531a86ea72993a4571192d1fdd5c" args="" -->
<a class="el" href="classGlobalConf.html">GlobalConf</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#ab0f7531a86ea72993a4571192d1fdd5c">gc</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A pointer to the <a class="el" href="classGlobalConf.html" title="(blackadder Core) GlobalConf is a Click Element that contains information that need...">GlobalConf</a> Element for reading some global node configuration. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae602ff5883276bbcd2f279ba331142f3"></a><!-- doxytag: member="Forwarder::_id" ref="ae602ff5883276bbcd2f279ba331142f3" args="" -->
atomic_uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#ae602ff5883276bbcd2f279ba331142f3">_id</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">It is used for filling the ip_id field in the IP packet when sending over raw sockets. It is increased for every sent packet. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7f36780628bd69d7ad053076172a289d"></a><!-- doxytag: member="Forwarder::number_of_links" ref="a7f36780628bd69d7ad053076172a289d" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#a7f36780628bd69d7ad053076172a289d">number_of_links</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of links in the forwarding table. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3a2c297f8e582d4f961b8f68988599fa"></a><!-- doxytag: member="Forwarder::proto_type" ref="a3a2c297f8e582d4f961b8f68988599fa" args="" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#a3a2c297f8e582d4f961b8f68988599fa">proto_type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The Ethernet protocol type (hardcoded to be 0x080a). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0fe5ddf497d5cd71592d93945f5f8e43"></a><!-- doxytag: member="Forwarder::fwTable" ref="a0fe5ddf497d5cd71592d93945f5f8e43" args="" -->
Vector&lt; <a class="el" href="classForwardingEntry.html">ForwardingEntry</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classForwarder.html#a0fe5ddf497d5cd71592d93945f5f8e43">fwTable</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A vector containing all <a class="el" href="classForwardingEntry.html" title="(blackadder Core) a forwarding_entry represents an entry in the forwarding table...">ForwardingEntry</a>. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>(blackadder Core) The <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> Element implements the forwarding function. Currently it supports the basic LIPSIN mechanism. </p>
<p>It can work in two modes. In a MAC mode it expects ethernet frames from the network devices. It checks the LIPSIN identifiers and pushes packets to another Ethernet interface or to the <a class="el" href="classLocalProxy.html" title="(blackadder Core) The LocalProxy Element is the core element in a Blackadder Node...">LocalProxy</a>. In IP mode, the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> expects raw IP sockets as the underlying network. Note that a mixed mode is currently not supported. Some lines must be written. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aab9f2f9898976da51d002adabdb1b8a8"></a><!-- doxytag: member="Forwarder::Forwarder" ref="aab9f2f9898976da51d002adabdb1b8a8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Forwarder::Forwarder </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor: it does nothing - as Click suggests. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="acaaa7437946717fbc712b1b7727e8326"></a><!-- doxytag: member="Forwarder::~Forwarder" ref="acaaa7437946717fbc712b1b7727e8326" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Forwarder::~Forwarder </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Destructor: it does nothing - as Click suggests. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0408ca9c7e6231336e9917b87e01699a"></a><!-- doxytag: member="Forwarder::class_name" ref="a0408ca9c7e6231336e9917b87e01699a" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* Forwarder::class_name </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the class name - required by Click </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="aa12014363a6c44d41ce6aaf76284839a"></a><!-- doxytag: member="Forwarder::cleanup" ref="aa12014363a6c44d41ce6aaf76284839a" args="(CleanupStage stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Forwarder::cleanup </td>
          <td>(</td>
          <td class="paramtype">CleanupStage&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cleanups everything. </p>
<p>If stage &gt;= CLEANUP_CONFIGURED (i.e. the Element was configured), <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> will delete all stored <a class="el" href="classForwardingEntry.html" title="(blackadder Core) a forwarding_entry represents an entry in the forwarding table...">ForwardingEntry</a>. </p>

</div>
</div>
<a class="anchor" id="a40dc92891be477b51b2f142407eacba7"></a><!-- doxytag: member="Forwarder::configure_phase" ref="a40dc92891be477b51b2f142407eacba7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Forwarder::configure_phase </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This Element must be configured AFTER the <a class="el" href="classGlobalConf.html" title="(blackadder Core) GlobalConf is a Click Element that contains information that need...">GlobalConf</a> Element. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the correct number so that it is configured afterwards </dd></dl>

</div>
</div>
<a class="anchor" id="a064df414ca3b0f54ef0b814d4ef4ee6e"></a><!-- doxytag: member="Forwarder::initialize" ref="a064df414ca3b0f54ef0b814d4ef4ee6e" args="(ErrorHandler *errh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Forwarder::initialize </td>
          <td>(</td>
          <td class="paramtype">ErrorHandler *&nbsp;</td>
          <td class="paramname"> <em>errh</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method is called by Click when the Element is about to be initialized. There is nothing that needs initialization though. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>errh</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="ae4e4728697424785342b5ec538295055"></a><!-- doxytag: member="Forwarder::port_count" ref="ae4e4728697424785342b5ec538295055" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* Forwarder::port_count </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the port count - required by Click - it can have multiple output ports that are connected with Click "network" Elements, like ToDevice and raw sockets. It can have multiple input ports from multiple "network" devices, like FromDevice or raw sockets. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="a76261872ec5ee66b76c1a0dd3f714bf6"></a><!-- doxytag: member="Forwarder::processing" ref="a76261872ec5ee66b76c1a0dd3f714bf6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* Forwarder::processing </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>a PUSH Element. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>PUSH </dd></dl>

</div>
</div>
<a class="anchor" id="ae6f7478cab95a99ef3b34b1ae27832be"></a><!-- doxytag: member="Forwarder::push" ref="ae6f7478cab95a99ef3b34b1ae27832be" args="(int port, Packet *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Forwarder::push </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Packet *&nbsp;</td>
          <td class="paramname"> <em>p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method is called whenever a packet is received from the network (and pushed to the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> by a "network" Element) or whenever the <a class="el" href="classLocalProxy.html" title="(blackadder Core) The LocalProxy Element is the core element in a Blackadder Node...">LocalProxy</a> pushes a packet to the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a>. </p>
<p><a class="el" href="classLocalProxy.html" title="(blackadder Core) The LocalProxy Element is the core element in a Blackadder Node...">LocalProxy</a> pushes packets to the 0 port of the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a>. The first FID_LEN bytes are the forwarding identifier assigned by the <a class="el" href="classLocalProxy.html" title="(blackadder Core) The LocalProxy Element is the core element in a Blackadder Node...">LocalProxy</a>. The <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> checks with all its <a class="el" href="classForwardingEntry.html" title="(blackadder Core) a forwarding_entry represents an entry in the forwarding table...">ForwardingEntry</a> by oring the LIPSIN identifier with each Link identifier and pushes the packet to the right "network" elements. NOTE that the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> will not push back a packet to the <a class="el" href="classLocalProxy.html" title="(blackadder Core) The LocalProxy Element is the core element in a Blackadder Node...">LocalProxy</a> if the LIPSIN identifier matches the internal link identifier. This has to be checked before pushing the packet.</p>
<p>When a packet is pushed by the network the <a class="el" href="classForwarder.html" title="(blackadder Core) The Forwarder Element implements the forwarding function. Currently...">Forwarder</a> checks with all its entries as well as the internal Link identifier and pushes the packet accordingly.</p>
<p>In general, if now entries that match are found the packet is killed. Moreover the packet is copied only as required by the number of entries that match the LIPSIN identifier. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>the port from which the packet was pushed. 0 for <a class="el" href="classLocalProxy.html" title="(blackadder Core) The LocalProxy Element is the core element in a Blackadder Node...">LocalProxy</a>, &gt;0 for network elements </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>a pointer to the packet </td></tr>
  </table>
  </dd>
</dl>

<p><p>a packet has been pushed by the underlying network. </p>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="forwarder_8hh_source.html">forwarder.hh</a></li>
<li>src/forwarder.cc</li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Apr 6 10:06:20 2012 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
