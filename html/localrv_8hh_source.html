<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>src/localrv.hh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>src/localrv.hh</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">* Copyright (C) 2010-2011  George Parisis and Dirk Trossen</span>
<a name="l00003"></a>00003 <span class="comment">* All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* This program is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment">* modify it under the terms of the GNU General Public License version</span>
<a name="l00007"></a>00007 <span class="comment">* 2 as published by the Free Software Foundation.</span>
<a name="l00008"></a>00008 <span class="comment">*</span>
<a name="l00009"></a>00009 <span class="comment">* Alternatively, this software may be distributed under the terms of</span>
<a name="l00010"></a>00010 <span class="comment">* the BSD license.</span>
<a name="l00011"></a>00011 <span class="comment">*</span>
<a name="l00012"></a>00012 <span class="comment">* See LICENSE and COPYING for more details.</span>
<a name="l00013"></a>00013 <span class="comment">*/</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="preprocessor">#ifndef CLICK_LOCALRV_HH</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">#define CLICK_LOCALRV_HH</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;globalconf.hh&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;informationitem.hh&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;scope.hh&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;remotehost.hh&quot;</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 CLICK_DECLS
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="keyword">class </span><a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a>;
<a name="l00026"></a>00026 <span class="keyword">class </span><a class="code" href="classScope.html" title="(blackadder Core) A Scope represents a scope that exists somewhere in the information...">Scope</a>;
<a name="l00027"></a>00027 <span class="keyword">class </span><a class="code" href="classInformationItem.html" title="(blackadder Core) An InformationItem represents an item that exists somewhere in...">InformationItem</a>;
<a name="l00028"></a>00028 
<a name="l00035"></a><a class="code" href="classLocalRV.html">00035</a> <span class="keyword">class </span><a class="code" href="classLocalRV.html" title="(blackadder Core) LocalRV implements the rendezvous core function. Pub/sub requests...">LocalRV</a> : <span class="keyword">public</span> Element {
<a name="l00036"></a>00036 <span class="keyword">public</span>:
<a name="l00041"></a>00041     <a class="code" href="classLocalRV.html#a065463a012822b3f3cd102116768e6ae" title="Constructor: it does nothing - as Click suggests.">LocalRV</a>();
<a name="l00046"></a>00046     <a class="code" href="classLocalRV.html#afd943e4518368e7da1a65c8b0d985958" title="Destructor: it does nothing - as Click suggests.">~LocalRV</a>();
<a name="l00051"></a><a class="code" href="classLocalRV.html#a5262699b473139729d33088a864259ae">00051</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classLocalRV.html#a5262699b473139729d33088a864259ae" title="the class name - required by Click">class_name</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;LocalRV&quot;</span>;}
<a name="l00056"></a><a class="code" href="classLocalRV.html#a111958cd055706bc3dd5bc17948834af">00056</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classLocalRV.html#a111958cd055706bc3dd5bc17948834af" title="the port count - required by Click.">port_count</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;-/-&quot;</span>;}
<a name="l00061"></a><a class="code" href="classLocalRV.html#ad4dbad50d37a362976e1b72e3d0056cd">00061</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classLocalRV.html#ad4dbad50d37a362976e1b72e3d0056cd" title="a PUSH Element.">processing</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> PUSH;}
<a name="l00065"></a>00065     <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a57e894c80349029984628780196db834" title="Element configuration. LocalRV needs only a pointer to the GlovalConf Element so...">configure</a>(Vector&lt;String&gt;&amp;, ErrorHandler*);
<a name="l00069"></a><a class="code" href="classLocalRV.html#a2777a6b8d7ccc08dd55f80cd09c7bcf1">00069</a>     <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a2777a6b8d7ccc08dd55f80cd09c7bcf1" title="This Element must be configured AFTER the GlobalConf Element.">configure_phase</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> 201;}
<a name="l00077"></a>00077     <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a37ecdbf08f61531406894d4755b8e85b" title="This method is called by Click when the Element is about to be initialized. Upon...">initialize</a>(ErrorHandler *errh);
<a name="l00080"></a>00080     <span class="keywordtype">void</span> <a class="code" href="classLocalRV.html#ab441400c3baf3c9adc8f4848826f7410" title="Cleanups everything. Upon the cleanup() method invocation, the LocalRV will delete...">cleanup</a>(CleanupStage stage);
<a name="l00097"></a>00097     <span class="keywordtype">void</span> <a class="code" href="classLocalRV.html#ad2929583f141f466a596609f05145c47" title="The push() method is called whenever the LocalProxy pushes a packet to the LocalRV...">push</a>(<span class="keywordtype">int</span> port, Packet *p);
<a name="l00112"></a>00112     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#adb84bd706abce04182b4b15ef0426a21" title="this method is called if the type of request is PUBLISH_SCOPE.">publish_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00125"></a>00125     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a6b2c98d745b6b16475bdd9a27556c736" title="This method publishes a root scope in the information graph maintained by this rendezvous...">publish_root_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00145"></a>00145     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a5d21a792f6a1044cf45fc7155327bfe6" title="This method publishes an inner scope in the information graph maintained by this...">publish_inner_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00170"></a>00170     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a0a253916dca7c35dd6afdc5754c44c20" title="This method republishes an inner scope under an existing Scope in the information...">republish_inner_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00183"></a>00183     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a28e4bec98b88b4ddbb0dc13510354512" title="this method is called if the type of request is PUBLISH_INFO.">publish_info</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00203"></a>00203     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a56d70cb180bff2187177d0a9d9bb1fc3" title="This method publishes an InformationItem in the information graph maintained by this...">advertise_info</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00226"></a>00226     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#ab082df95198c72296d095075a33a52b9" title="This method republishes an InformationItem under an existing Scope in the information...">readvertise_info</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00259"></a>00259     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a7825e02b6ed652732803ae72bc8107d6" title="This method will try to unpublish the Scope identified by the fullID = prefixID +...">unpublish_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00275"></a>00275     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#af08057b2a485359958f873b0726a6fde" title="This method will try to unpublish the InformationItem identified by the fullID =...">unpublish_info</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_publisher, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00287"></a>00287     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a517eb42785bb3afe90c0b9433cd99eb5" title="this method will subscribe _subscriber to the Scope identified by the fullID = prefixID...">subscribe_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_subscriber, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00303"></a>00303     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a70d12d11275aeb393ee6a07090c4b1d5" title="this method will subscribe _subscriber to the root Scope identified by ID.">subscribe_root_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_subscriber, String &amp;ID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00320"></a>00320     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#a60ddf3a3d77444645d8661c48349bb54" title="this method will subscribe _subscriber to Scope identified by the fullID = prefixID...">subscribe_inner_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_subscriber, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00334"></a>00334     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#aed55f217093060bdd8589303b235f2b8" title="this method will subscribe _subscriber to InformationItem identified by the fullID...">subscribe_info</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_subscriber, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00345"></a>00345     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#aa0c52dc21d81f145957d86d0f2c0ddb8" title="This method will unsubscribe _subscriber from Scope identified by the fullID = prefixID...">unsubscribe_scope</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_subscriber, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00356"></a>00356     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classLocalRV.html#adcda5a86e9abbcdf85dc294c7ccf442e" title="This method will unsubscribe _subscriber from InformationItem identified by the fullID...">unsubscribe_info</a>(<a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *_subscriber, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy);
<a name="l00362"></a>00362     <a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *<a class="code" href="classLocalRV.html#a84e5c36cce60d536999473e8c4ff2cd9" title="It looks into the LocalRV::pub_sub_Index for the RemoteHost identified by the node...">getRemoteHost</a>(String &amp; nodeID);
<a name="l00368"></a>00368     <span class="keywordtype">void</span> <a class="code" href="classLocalRV.html#a02d136f02321781331f15193a52938dc" title="This method will notify all subscribers in the subscribers set about the existence...">notifySubscribers</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> type, StringSet &amp;IDs, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> strategy, RemoteHostSet &amp;subscribers);
<a name="l00375"></a>00375     <span class="keywordtype">void</span> <a class="code" href="classLocalRV.html#a55bb06301311cf69123e01118669abf3" title="This method will publish a SCOPE_PUBLISHED notification locally to the LocalProxy...">notifyLocalSubscriber</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> type, StringSet &amp;IDs);
<a name="l00387"></a>00387     <span class="keywordtype">void</span> <a class="code" href="classLocalRV.html#a44ff4fd48479ae217ab40b5d0beb3c75" title="This method will notify the LocalProxy to start or stop publishing data for an InformationItem...">notifyLocalPublisher</a>(<a class="code" href="classInformationItem.html" title="(blackadder Core) An InformationItem represents an item that exists somewhere in...">InformationItem</a> *pub, <a class="code" href="classBABitvector.html" title="(blackadder Core) Stolen by Click&amp;#39;s bitvector. Can now directly access the _data...">BABitvector</a> *FID);
<a name="l00398"></a>00398     <span class="keywordtype">void</span> <a class="code" href="classLocalRV.html#ab4c7684d6db1abf1e4692ca8996ada3c" title="This the rendezvous method that is run when several pub/sub requests are issued.">rendezvous</a>(<a class="code" href="classInformationItem.html" title="(blackadder Core) An InformationItem represents an item that exists somewhere in...">InformationItem</a> *pub, RemoteHostSet &amp;_subscribers);
<a name="l00412"></a>00412     <span class="keywordtype">void</span> <a class="code" href="classLocalRV.html#a7a8c801125bd48e0216089968f700975" title="Using the Blackadder API this method will publish a request (using the IMPLICIT_RENDEZVOUS...">requestTMAssistanceForRendezvous</a>(<a class="code" href="classInformationItem.html" title="(blackadder Core) An InformationItem represents an item that exists somewhere in...">InformationItem</a> *pub, RemoteHostSet &amp;_publishers, RemoteHostSet &amp;_subscribers, IdsHashMap &amp;IDs);
<a name="l00420"></a>00420     <span class="keywordtype">void</span> <a class="code" href="classLocalRV.html#a9b1848be684748ce7b130a2b5196992b" title="Using the Blackadder API this method will publish a request (using the IMPLICIT_RENDEZVOUS...">requestTMAssistanceForNotifyingSubscribers</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> request_type, StringSet &amp;IDs, RemoteHostSet &amp;_subscribers, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> strategy);
<a name="l00423"></a><a class="code" href="classLocalRV.html#abc6beb8351606525eae7cbc9664d15ef">00423</a>     <a class="code" href="classGlobalConf.html" title="(blackadder Core) GlobalConf is a Click Element that contains information that need...">GlobalConf</a> *<a class="code" href="classLocalRV.html#abc6beb8351606525eae7cbc9664d15ef" title="A pointer to the GlobalConf Element so that LocalProxy can access the node&amp;#39;s...">gc</a>;
<a name="l00428"></a><a class="code" href="classLocalRV.html#a8491461c8d6e7b702483e1a69c80d2e4">00428</a>     <a class="code" href="classRemoteHost.html" title="(blackadder Core) The RemoteHost class represents a Blackadder network node.">RemoteHost</a> *<a class="code" href="classLocalRV.html#a8491461c8d6e7b702483e1a69c80d2e4" title="A pointer to a RemoteHost which represents the local Blackadder node.">localProxy</a>;
<a name="l00433"></a><a class="code" href="classLocalRV.html#a7ff631759255f5d48029251f1522bf09">00433</a>     ScopeHashMap <a class="code" href="classLocalRV.html#a7ff631759255f5d48029251f1522bf09" title="A HashTable that maps information identifiers to pointers to Scope.">scopeIndex</a>;
<a name="l00438"></a><a class="code" href="classLocalRV.html#a36270b1878e05cf170f2a697255806e5">00438</a>     IIHashMap <a class="code" href="classLocalRV.html#a36270b1878e05cf170f2a697255806e5" title="A HashTable that maps information identifiers to pointers to InformationItem.">pubIndex</a>;
<a name="l00443"></a><a class="code" href="classLocalRV.html#a9bfb78b3be50aa36604de2a99ae853c0">00443</a>     RemoteHostHashMap <a class="code" href="classLocalRV.html#a9bfb78b3be50aa36604de2a99ae853c0" title="A Click&amp;#39;s HashTable that maps node labels to pointers to RemoteHost.">pub_sub_Index</a>;
<a name="l00444"></a>00444 };
<a name="l00445"></a>00445 
<a name="l00446"></a>00446 CLICK_ENDDECLS
<a name="l00447"></a>00447 <span class="preprocessor">#endif</span>
<a name="l00448"></a>00448 <span class="preprocessor"></span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Apr 6 10:06:19 2012 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
