<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>src/localproxy.hh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>src/localproxy.hh</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (C) 2010-2011  George Parisis and Dirk Trossen</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * This program is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment"> * modify it under the terms of the GNU General Public License version</span>
<a name="l00007"></a>00007 <span class="comment"> * 2 as published by the Free Software Foundation.</span>
<a name="l00008"></a>00008 <span class="comment"> *</span>
<a name="l00009"></a>00009 <span class="comment"> * Alternatively, this software may be distributed under the terms of</span>
<a name="l00010"></a>00010 <span class="comment"> * the BSD license.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * See LICENSE and COPYING for more details.</span>
<a name="l00013"></a>00013 <span class="comment"> */</span>
<a name="l00014"></a>00014 <span class="preprocessor">#ifndef CLICK_LOCALPROXY_HH</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#define CLICK_LOCALPROXY_HH</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;globalconf.hh&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;localhost.hh&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;activepub.hh&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;click/router.hh&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 CLICK_DECLS
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">class </span><a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a>;
<a name="l00025"></a>00025 
<a name="l00034"></a><a class="code" href="classLocalProxy.html">00034</a> <span class="keyword">class </span><a class="code" href="classLocalProxy.html" title="(blackadder Core) The LocalProxy Element is the core element in a Blackadder Node...">LocalProxy</a> : <span class="keyword">public</span> Element {
<a name="l00035"></a>00035 <span class="keyword">public</span>:
<a name="l00040"></a>00040     <a class="code" href="classLocalProxy.html#ab5d743e385bedce5ea87cfcb7d51d93e" title="Constructor: it does nothing - as Click suggests.">LocalProxy</a>();
<a name="l00045"></a>00045     <a class="code" href="classLocalProxy.html#a0aa381592ee29a98f6f63c9b0ce3b9a6" title="Destructor: it does nothing - as Click suggests.">~LocalProxy</a>();
<a name="l00050"></a><a class="code" href="classLocalProxy.html#a58d062138f81de17b06ebf2f4fed90f6">00050</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classLocalProxy.html#a58d062138f81de17b06ebf2f4fed90f6" title="the class name - required by Click">class_name</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;LocalProxy&quot;</span>;}
<a name="l00055"></a><a class="code" href="classLocalProxy.html#ac286cea68086654b19528b1d9ccf3b22">00055</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classLocalProxy.html#ac286cea68086654b19528b1d9ccf3b22" title="the port count - required by Click - it can have multiple input and output ports...">port_count</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;-/-&quot;</span>;}
<a name="l00060"></a><a class="code" href="classLocalProxy.html#a9b920e4d712be171da29e506b111328f">00060</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classLocalProxy.html#a9b920e4d712be171da29e506b111328f" title="a PUSH Element.">processing</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> PUSH;}
<a name="l00064"></a>00064     <span class="keywordtype">int</span> <a class="code" href="classLocalProxy.html#a41744db7f32669ada946ca9077d31718" title="Element configuration. LocalProxy needs only a pointer to the GlovalConf Element...">configure</a>(Vector&lt;String&gt;&amp;, ErrorHandler*);
<a name="l00068"></a><a class="code" href="classLocalProxy.html#a5f79f18ee961978ec7a089ab5f8334f9">00068</a>     <span class="keywordtype">int</span> <a class="code" href="classLocalProxy.html#a5f79f18ee961978ec7a089ab5f8334f9" title="This Element must be configured AFTER the GlobalConf Element.">configure_phase</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> 200;}
<a name="l00074"></a>00074     <span class="keywordtype">int</span> <a class="code" href="classLocalProxy.html#a89f2da6dea80ad0a416daccae1f1f578" title="This method is called by Click when the Element is about to be initialized. There...">initialize</a>(ErrorHandler *errh);
<a name="l00079"></a>00079     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a4eb60a19af8f4cba96484d52af6aa8a1" title="Cleanups everything.">cleanup</a>(CleanupStage stage);
<a name="l00107"></a>00107     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a298f055c25d326c23d7770d769dfab57" title="This method is called by Click whenever a packet is pushed to the LocalProxy by some...">push</a>(<span class="keywordtype">int</span> port, Packet *p);
<a name="l00114"></a>00114     <a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> * <a class="code" href="classLocalProxy.html#aef59f7243221506956d86bbc4533ad70" title="It looks into the local_pub_sub_Index for a LocalHost (a publisher or subscriber)...">getLocalHost</a>(<span class="keywordtype">int</span> type_of_publisher, <span class="keywordtype">int</span> publisher_identifier);
<a name="l00121"></a>00121     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a16ba16da54113c5b2c85caa59fca84f5" title="On behalf of the LocalHost (application or Click element) the LocalProxy will undo...">disconnect</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost);
<a name="l00134"></a>00134     <span class="keywordtype">bool</span> <a class="code" href="classLocalProxy.html#aafb40fcf398731192ebd2e34722f72de" title="It handles a pub/sub request sent by a LocalHost. Depending on the request it calls...">handleLocalRequest</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;type, <a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost, String &amp;ID, String &amp;prefixID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> &amp;strategy, <a class="code" href="classBABitvector.html" title="(blackadder Core) Stolen by Click&amp;#39;s bitvector. Can now directly access the _data...">BABitvector</a> &amp;RVFID);
<a name="l00145"></a>00145     <span class="keywordtype">bool</span> <a class="code" href="classLocalProxy.html#a91fa48d11d2858c94d47fdb73c0ba306" title="The behaviour of this method is strategy specific. It should store to the LocalProxy...">storeActivePublication</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost, String &amp;fullID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> strategy, <a class="code" href="classBABitvector.html" title="(blackadder Core) Stolen by Click&amp;#39;s bitvector. Can now directly access the _data...">BABitvector</a> &amp; RVFID, <span class="keywordtype">bool</span> isScope);
<a name="l00156"></a>00156     <span class="keywordtype">bool</span> <a class="code" href="classLocalProxy.html#a03486cf38c89f531477aceea9424976c" title="The behaviour of this method is strategy specific. It should store to the LocalProxy...">storeActiveSubscription</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost, String &amp;fullID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> strategy, <a class="code" href="classBABitvector.html" title="(blackadder Core) Stolen by Click&amp;#39;s bitvector. Can now directly access the _data...">BABitvector</a> &amp; RVFID, <span class="keywordtype">bool</span> isScope);
<a name="l00165"></a>00165     <span class="keywordtype">bool</span> <a class="code" href="classLocalProxy.html#a5df985a1811854fd05b7c2561ad3f348" title="The behaviour of this method is strategy specific. It should remove by the LocalProxy...">removeActivePublication</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost, String &amp;fullID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> strategy);
<a name="l00174"></a>00174     <span class="keywordtype">bool</span> <a class="code" href="classLocalProxy.html#a73da5ed45d29ca41606a7f764ff8c8de" title="The behaviour of this method is strategy specific. It should remove by the LocalProxy...">removeActiveSubscription</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost, String &amp;fullID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> strategy);
<a name="l00185"></a>00185     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a572f06200122074343d9495f4dfe44d4" title="Handles a notification sent by a rendezvous point.">handleRVNotification</a>(Packet *p);
<a name="l00197"></a>00197     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a215635203ad1fa074de441e2dc30f91a" title="This method is called whenever a LocalHost (application or Click Element) sends a...">handleUserPublication</a>(String &amp;ID, Packet *p, <a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost);
<a name="l00209"></a>00209     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a215635203ad1fa074de441e2dc30f91a" title="This method is called whenever a LocalHost (application or Click Element) sends a...">handleUserPublication</a>(String &amp;ID, <a class="code" href="classBABitvector.html" title="(blackadder Core) Stolen by Click&amp;#39;s bitvector. Can now directly access the _data...">BABitvector</a> &amp;FID_to_subscribers, Packet *p, <a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost);
<a name="l00217"></a>00217     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a0a2534323a7b7b44b9a4e2bd6b39aad9" title="This method is called whenever a network publication is pushed to the LocalProxy...">handleNetworkPublication</a>(Vector&lt;String&gt; &amp;IDs, Packet *p);
<a name="l00226"></a>00226     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#afa25264eb23854f4f5e93503f5ad5351">publishReqToRV</a>(Packet *p, <a class="code" href="classBABitvector.html" title="(blackadder Core) Stolen by Click&amp;#39;s bitvector. Can now directly access the _data...">BABitvector</a> &amp;FID);
<a name="l00236"></a>00236     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a8339c9a70bf30ee999adfebc31c4a497" title="It sends a PUBLISHED_DATA event to a LocalHost (an application or a Click Element)...">pushDataToLocalSubscriber</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost, String &amp;ID, Packet *p);
<a name="l00244"></a>00244     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a67c3bde83c5d299cbcf6cb31e9492570">pushDataToRemoteSubscribers</a>(<a class="code" href="classActivePublication.html" title="(blackadder Core) ActivePublication represents an active publication of an application...">ActivePublication</a> *aiip, Packet *p);
<a name="l00253"></a>00253     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a67c3bde83c5d299cbcf6cb31e9492570">pushDataToRemoteSubscribers</a>(Vector&lt;String&gt; &amp;IDs, <a class="code" href="classBABitvector.html" title="(blackadder Core) Stolen by Click&amp;#39;s bitvector. Can now directly access the _data...">BABitvector</a> &amp;FID_to_subscribers, Packet *p);
<a name="l00265"></a>00265     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#ace6dc7ba8d08820d2f331d0ef3d5857c" title="This method is called only by one of the deleteAll* methods. It creates and sends...">createAndSendPacketToRV</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> type, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> IDLength, String &amp;ID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> prefixIDLength, String &amp;prefixID, <a class="code" href="classBABitvector.html" title="(blackadder Core) Stolen by Click&amp;#39;s bitvector. Can now directly access the _data...">BABitvector</a> &amp;RVFID, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> strategy);
<a name="l00272"></a>00272     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a3a61cbb6d091b9651fe5d1b5d08be5cd" title="This method is called on behalf of a LocalHost (an application or a Click Element)...">deleteAllActiveInformationItemPublications</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> * _localhost);
<a name="l00279"></a>00279     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#ac93f6a4f7decbc252b7192a93b8975bb" title="This method is called on behalf of a LocalHost (an application or a Click Element)...">deleteAllActiveInformationItemSubscriptions</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> * _localhost);
<a name="l00286"></a>00286     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a5cd7cb66df5c8b7797ed8d14f5ce6539">deleteAllActiveScopePublications</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> * _localhost);
<a name="l00293"></a>00293     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#ae46010c298b38ee694313d15df218714" title="This method is called on behalf of a LocalHost (an application or a Click Element)...">deleteAllActiveScopeSubscriptions</a>(<a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> * _localhost);
<a name="l00303"></a>00303     <span class="keywordtype">bool</span> <a class="code" href="classLocalProxy.html#abeefea4b15b8072aabfcf68ea2972388" title="This method looks for ActiveSubscriptions for the provided bector of identifier.">findLocalSubscribers</a>(Vector&lt;String&gt; &amp;IDs, LocalHostStringHashMap &amp; _localSubscribers);
<a name="l00311"></a>00311     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#ab5566149b9724f3bdd1a3dd848fe20a0" title="It looks for local subscribers to father item of the one identified by the ID.">findActiveSubscriptions</a>(String &amp;ID, LocalHostSet &amp;local_subscribers_to_notify);
<a name="l00318"></a>00318     <span class="keywordtype">void</span> <a class="code" href="classLocalProxy.html#a7f23541db4f68ba1500fcc2858dcebb7" title="This method creates a Click Packet, copies a pub/sub notification to a LocalHost...">sendNotificationLocally</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> type, <a class="code" href="classLocalHost.html" title="(blackadder Core) The LocalHost class represents a local software entity that accesses...">LocalHost</a> *_localhost, String ID);
<a name="l00321"></a><a class="code" href="classLocalProxy.html#a2e0d2c5c39dfb3a1029f39a1d8d6d360">00321</a>     <a class="code" href="classGlobalConf.html" title="(blackadder Core) GlobalConf is a Click Element that contains information that need...">GlobalConf</a> *<a class="code" href="classLocalProxy.html#a2e0d2c5c39dfb3a1029f39a1d8d6d360" title="A pointer to the GlobalConf Element so that LocalProxy can access the node&amp;#39;s...">gc</a>;
<a name="l00326"></a><a class="code" href="classLocalProxy.html#aa29c7e90ea74f95d73cecff50a84492f">00326</a>     PubSubIdx <a class="code" href="classLocalProxy.html#aa29c7e90ea74f95d73cecff50a84492f" title="A HashTable that maps Publishers&amp;#39; and Subscribers&amp;#39; identifiers to pointers...">local_pub_sub_Index</a>;
<a name="l00329"></a><a class="code" href="classLocalProxy.html#ae44ac64f814194db4d57c16327348f74">00329</a>     ActivePub <a class="code" href="classLocalProxy.html#ae44ac64f814194db4d57c16327348f74" title="A HashTable that maps an ActivePublication identifier (full ID from a root of a graph)...">activePublicationIndex</a>;
<a name="l00332"></a><a class="code" href="classLocalProxy.html#a8b7f7c3e43855b16feacfc397c5088cc">00332</a>     ActiveSub <a class="code" href="classLocalProxy.html#a8b7f7c3e43855b16feacfc397c5088cc" title="A HashTable that maps an ActiveSubscription identifier (full ID from a root of a...">activeSubscriptionIndex</a>;
<a name="l00333"></a>00333 };
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 CLICK_ENDDECLS
<a name="l00336"></a>00336 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Apr 6 10:06:19 2012 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
